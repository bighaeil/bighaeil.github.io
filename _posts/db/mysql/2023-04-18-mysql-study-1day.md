---
title: "MySQL 스터디 1일차"
categories:
    - db
    - mysql
last_modified_at: 2023-04-18T10:15:00
toc: true
---

# mysql 스터디 1일차

Real MySQL 4쳅터를 읽고 공부한 것을 정리해보자.

# 아키텍처

MySQL 서버의 아키텍처에 대해서 알아보자

## MySQL 엔진 아키텍처

MySQL 서버는 크게 MySQL 엔진과 스토리지 엔진으로 구분할 수 있다.

구성의 특징을 알아보자.

### MySQL 엔진

아래와 같은 구성으로 되어있다.

- 커넥션 핸들러
- SQL 인터페이스
- SQL 파서
- SQL 옵티마이저
- 캐시 & 버퍼

### 스토리지 엔진

특징은 아래와 같다.

실제 데이터를 디스크에 저장하거나 읽어오는 부분을 담당한다.

여러 개를 동시에 사용할 수 있다.

InnoDB 스토리지 엔진과 MyISAM 스토리지 엔진 등이 있겠으나 InnoDB 스토리지 엔진만 알아 보자.


## MySQL 스레딩 구조

MySQL 서버는 스레드 기반으로 작동하며 크게 포그라운드 스레드와 백그라운드 스레드로 구분한다.

백그라운드는 무시하고

> thread/sql/one_connection

위 스레드만 실제 사용자 요청을 처리하는 포그라운드 스레드다. 그래서 포그라운드 스레드를 클라이언트 스레드 사용자 스레드 라고 한다.

## 메모리

MySQL에서 사용하는 메모리 공간은 크게 `글로벌 메모리 영역`과 `로컬 메모리 영역`으로 구분할 수 있다.

### 글로벌 메모리 영역

일반적으로 클라이언트 스레드 수와 무관하게 하나의 메모리 공간만 할당된다.

생성된 메모리 영역은 모든 스레드가 공유한다.

대표적인 글로벌 메모리 영역은 다음과 같다.

- 테이블 캐시
- InnoDB 버퍼 풀
- InnoDB 어댑티브 해시 인덱스
- InnoDB 리두 로그 버퍼

### 로컬 메모리 영역

세션 메모리 영역이라고도 한다.

클라이언트 스레드가 사용하는 메모리 영역이다.

절대 공유하여 사용하지 않는다.

대표적인 로컬 메모리 영역은 다음과 같다.

- 정렬 버퍼
- 조인 버퍼
- 바이너리 로그 캐시
- 네트워크 버퍼


